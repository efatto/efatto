<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

      <template id="l10n_it_account.internal_layout">
          <!-- Multicompany -->
          <t t-if="o and 'company_id' in o">
              <t t-set="company" t-value="o.company_id"></t>
          </t>
          <t t-if="not o or not 'company_id' in o">
              <t t-set="company" t-value="res_company"></t>
          </t>

          <div class="header">
              <div class="row">
                  <div class="col-xs-7 company-info">
                      <h3 class="name"><span t-esc="company.name" /></h3>
                      <span class="address">
                        <span class="street" t-esc="company.street" /> -
                        <span class="zip" t-esc="company.zip" /> -
                        <span class="city" t-esc="company.city" /> -
                        <span class="state" t-esc="company.state_id.code" /><br/>
                      </span>
                      <span class="vat text-right" t-if="company.partner_id.vat">
                        <span>P.IVA:</span> <span t-esc="company.partner_id.vat" />
                      </span> -
                      <span class="fiscalcode text-right" t-if="company.partner_id.fiscalcode">
                        <span>Fiscalcode:</span> <span t-esc="company.partner_id.fiscalcode" />
                      </span>
                  </div>
                  <div class="col-xs-5 text-right doc-info">
                      <h3 class="doc-title" t-esc="title"/>
                  </div>
              </div>
          </div>
          <t t-raw="0" />
          <div class="footer">
              <div class="row">
                  <div class="col-xs-4">

                  </div>
                  <div class="col-xs-4 col-xs-offset-4 text-right">
                    <span style="display: none;" id="l10n_it_count_fiscal_page_base" t-esc="l10n_it_count_fiscal_page_base" />
                    <ul class="list-inline">Pag:
                        <li>
                            <t t-if="l10n_it_fiscalyear_code">
                            <span t-esc="l10n_it_fiscalyear_code"/>
                        </t>
                            <t t-if="not l10n_it_fiscalyear_code">
                            <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y')"/>
                        </t>
                        </li>
                        <li>/</li>
                        <li><span class="page"/></li>
                    </ul>
                  </div>
              </div>
          </div>
      </template>

      <template id="l10n_it_account.minimal_layout" inherit_id="report.minimal_layout">
            <xpath expr="//head" position="inside">
                <link rel="stylesheet" href="/l10n_it_vat_registries/static/src/css/l10n_it_vat_registries.css"/>
            </xpath>
            <xpath expr="//head/t/script" position="replace">
                <script>
                function subst() {
                    var vars = {};
                    var x = document.location.search.substring(1).split('&amp;');
                    for (var i in x) {
                        var z = x[i].split('=', 2);
                        vars[z[0]] = unescape(z[1]);
                    }
                    var x=['frompage', 'topage', 'page', 'webpage', 'section', 'subsection', 'subsubsection'];
                    for (var i in x) {
                        var y = document.getElementsByClassName(x[i]);

                        fiscal_page_base = 0
                        if (document.getElementById('l10n_it_count_fiscal_page_base')!=null){
                            if (document.getElementById('l10n_it_count_fiscal_page_base').innerHTML){
                                fiscal_page_base = parseInt(document.getElementById('l10n_it_count_fiscal_page_base').innerHTML);
                            }
                        }
                        fiscalyear_code = 0
                        if (document.getElementById('l10n_it_fiscalyear_code')!=null){
                            if (document.getElementById('l10n_it_fiscalyear_code').innerHTML){
                                fiscalyear_code = parseInt(document.getElementById('l10n_it_fiscalyear_code').innerHTML);
                            }
                        }
                        for (var j=0; j&lt;y.length; ++j)
                            if (x[i] == 'page') {
                                y[j].textContent = parseInt(eval(vars[x[i]]) + fiscal_page_base);
                            }
                            else {
                                y[j].textContent = vars[x[i]];
                            }
                        }
                    }
            </script>
            </xpath>
        </template>
    </data>
</openerp>
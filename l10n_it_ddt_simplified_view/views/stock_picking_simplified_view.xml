<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data noupdate="0">

    <record id="stock_picking_package_preparation_simplified_form" model="ir.ui.view">
      <field name="name">stock.picking.package.preparation.simplified.form</field>
      <field name="model">stock.picking.package.preparation</field>
      <field name="arch" type="xml">
        <form string="Package Preparation">
             <!--class="no_min_width"-->
          <header>
            <button name="action_put_in_pack" states="draft" string="Put in pack" type="object" class="oe_highlight" groups="base.group_user"/>
            <button name="action_done" states="draft,in_pack" string="Package done" type="object" class="oe_highlight" groups="base.group_user"/>
            <button name="action_cancel" states="draft,in_pack" string="Cancel" groups="base.group_user" type="object"/>
            <button name="action_draft" states="cancel,done" string="Reset to draft" type="object" class="oe_highlight" groups="base.group_user"/>
            <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,partially_available,assigned,done" statusbar_colors='{"shipping_except":"red","invoice_except":"red","waiting_date":"blue"}'/>
          </header>
          <sheet>
            <!--<div class="oe_right oe_button_box">-->
            <!--</div>-->
            <!--<h1>-->
          <field name="name" class="oe_inline" invisible="1" readonly="1"/>
            <field name="ddt_number" readonly="1"
                   attrs="{'invisible':[('ddt_number', '=', ''), ('ddt_type_id', '=', False)]}"/>
            <!--</h1>-->
            <group col="1" colspan="2">
                <field name="date" nolabel="1"/>
                <field name="ddt_type_id" widget="selection" nolabel="1"/>
                <field name="partner_id" nolabel="1" placeholder="Partner"/>
                <field name="partner_invoice_id" nolabel="1" placeholder="Invoice Partner"
                       domain="['|', ('id',  '=', partner_id), ('parent_id', '=', partner_id)]"
                       attrs="{'invisible':[('ddt_type_id', '=', False)], 'required':[('ddt_type_id', '!=', False)]}"/>
                <field name="partner_shipping_id" nolabel="1" placeholder="Shipping Partner"
                       domain="['|', ('id',  '=', partner_id), ('parent_id', '=', partner_id)]"
                       attrs="{'invisible':[('ddt_type_id', '=', False)], 'required':[('ddt_type_id', '!=', False)]}"/>
                <field name="date_done" attrs="{'invisible': [('state', '!=', 'done')]}"/>
                <field name="package_id" attrs="{'invisible': [('package_id', '=', False)]}"/>
                <field name="company_id" invisible="1"/>
            </group>
            <notebook>
              <page string="Rows">
                    <field name="line_ids" >
                        <tree string="Product lines" editable="bottom">
                            <field name="sequence" widget="handle"/>
                            <field name="product_id"/>
                            <field name="name" invisible="1"/>
                            <field name="product_uom_qty" string="Q.ty"  style="width: 20px"/>
                            <field name="product_uom" groups="product.group_uom" invisible="1"/>
                            <field name="lot_id" groups="stock.group_production_lot"/>
                        </tree>
                    </field>
                <group colspan="2" col="1">
                    <field name="carriage_condition_id" nolabel="1" placeholder="Carriage condition"
                           attrs="{'required':[('ddt_type_id', '!=', False)]}"/>
                    <field name="goods_description_id" nolabel="1" placeholder="Goods description"
                           attrs="{'required':[('ddt_type_id', '!=', False)]}"/>
                    <field name="transportation_reason_id" nolabel="1" placeholder="Transportation reason"
                           attrs="{'required':[('ddt_type_id', '!=', False)]}"/>
                    <field name="transportation_method_id" nolabel="1" placeholder="Transportation method"
                           attrs="{'required':[('ddt_type_id', '!=', False)]}"/>
                    <field name="carrier_id" nolabel="1" placeholder="Carrier"/>
                </group>
                <group colspan="2" col="1">
                    <field name="parcels"
                           attrs="{'required':[('ddt_type_id', '!=', False)]}"/>
                        <!--<field name="volume"/>-->
                        <!--<field name="weight"/>-->
                        <!--<field name="net_weight"/>-->
                        <!--<field name="invoice_id" />-->
                    <field name="ddt_date_start" nolabel="1"/>
                </group>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <record id="action_stock_picking_package_preparation_simplified" model="ir.actions.act_window">
      <field name="name">DDT Fast</field>
      <field name="res_model">stock.picking.package.preparation</field>
      <field name="type">ir.actions.act_window</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" ref="stock_picking_package_preparation_simplified_form"/>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Click to prepare a new package preparation.
        </p>
      </field>
    </record>

    <menuitem
      action="action_stock_picking_package_preparation_simplified"
      id="menu_stock_picking_package_preparation_simplified"
      parent="stock.menu_stock_warehouse_mgmt" sequence="3"/>

  </data>
</openerp>

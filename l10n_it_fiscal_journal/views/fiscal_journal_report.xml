<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

  <template id="report_fiscal_journal">
    <t t-call="report.html_container">
        <t t-call="l10n_it_account.internal_layout">
            <div class="page">
                <table style="width:100%; font-size: small;" cellspacing="0">
                    <thead>
                        <tr class="first_th_row">
                            <td colspan="6" style="padding:10;" t-esc="'LIBRO GIORNALE - Periodo di stampa dal ' + formatLang(start_date(), date=True) + ' al ' + formatLang(end_date(), date=True)"/>
                        </tr>
                        <tr style="page-break-inside: avoid; border:1px solid #A1A1A1; ">
                            <th class="left_without_line">DATA REG.</th>
                            <th class="left_without_line">NUM. REG.</th>
                            <th class="left_without_line">DESCRIZIONE</th>
                            <th class="left_without_line">CONTO</th>
                            <!--<th class="left_without_line">SEZIONALE</th>-->
                            <th class="left_without_line">DARE</th>
                            <th class="left_without_line">AVERE</th>
                        </tr>
                    </thead>

                    <t t-set="counter" t-value="0"/>
                    <tbody>
                        <t t-foreach="get_move(data['ids'])" t-as="move">
                            <t t-set="counter" t-value="counter + 1"/>
                            <t t-set="line_class_left" t-value="left_without_line"/>
                            <t t-set="line_class_right" t-value="right_without_line"/>
                            <t t-if="counter%2 == 0">
                                <t t-set="tcolor" t-value="'#F5F5F5'" />
                            </t>
                            <t t-if="counter%2 == 1">
                                <t t-set="tcolor" t-value="'white'" />
                            </t>
                            <t t-foreach="move.line_id" t-as="move_line">
                                <tr t-attf-style="#{'page-break-inside: avoid; border:1px solid #A1A1A1; ' + 'background-color: ' + tcolor + ';'}">
                                    <!-- Data registrazione -->
                                    <td class="left_without_line"><div style="page-break-inside: avoid" t-esc="formatLang(move.date, date=True)"/></td>
                                    <!-- Numero registrazione -->
                                    <td class="left_without_line"><div style="page-break-inside: avoid" t-esc="move.name"/></td>
                                    <!-- Descrizione -->
                                    <td class="left_without_line"><div style="page-break-inside: avoid" t-esc="move_line.name"/></td>
                                    <!-- Conto -->
                                    <td class="left_without_line"><div style="page-break-inside: avoid" t-esc="move_line.account_id.name"/></td>
                                    <!-- Sezionale -->
                                    <!--<td class="left_without_line"><div style="page-break-inside: avoid" t-esc="move.journal_id.code"/></td>-->
                                    <!-- DARE -->
                                    <td class="right_without_line"><div style="page-break-inside: avoid" t-esc="formatLang(move_line.debit)"/></td>
                                    <!-- AVERE -->
                                    <td class="right_without_line"><div style="page-break-inside: avoid" t-esc="formatLang(move_line.credit)"/></td>
                                </tr>
                            </t>
                        </t>
                        <t t-set="totals" t-value="get_totals(data['ids'])"/>
                            <tr t-attf-style="#{'page-break-inside: avoid; border:1px solid #A1A1A1;'}">
                                    <td colspan="4" class="left_without_line_bold">TOTALI</td>
                                    <!-- DARE -->
                                    <td class="right_without_line_bold"><div style="page-break-inside: avoid" t-esc="formatLang(totals['debit'])"/></td>
                                    <!-- AVERE -->
                                    <td class="right_without_line_bold"><div style="page-break-inside: avoid" t-esc="formatLang(totals['credit'])"/></td>
                                </tr>
                    </tbody>
                </table>
                <br/>

            </div>
        </t>
    </t>
      </template>
    </data>
</openerp>